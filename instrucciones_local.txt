#Instala docker
https://www.docker.com/

#Instala docker compose
sudo curl -L \
https://github.com/docker/compose/releases/download/1.10.0/docker-compose-$(uname -s)-$(uname -m) \
-o /usr/local/bin/docker-compose

chmod +x /usr/local/bin/docker-compose


#Instala docker machine

curl -L https://github.com/docker/machine/releases/download/v0.9.0/docker-machine-`uname -s`-`uname -m` \
> > /usr/local/bin/docker-machine && \
> chmod +x /usr/local/bin/docker-machine



# Crea las maquinas

export MACHINE_DRIVER=virtualbox

for N in $(seq 1 5); do
docker-machine create dpa-node$N
done


#conectar al lider
docker-machine ssh dpa-node1





#iniciar swarm indicando ip ya que tenia multiples interfaces
docker swarm init --advertise-addr 192.168.99.100

# imprime esto, ahora hay que ejecutarlo en los dem√°s nodos
for N in $(seq 3 5); do
  eval $(docker-machine env dpa-node$N)
  docker swarm join \
      --token SWMTKN-1-5yboxedpanw49d6g3f67o75h58noq37c9boinpylf3dnk9hnrh-8rw8zl6l7d1qs5d4uqttlc431 \
      192.168.99.107:2377
done
eval $(docker-machine env dpa-node1)



for N in $(seq 2 5); do 
	eval $(docker-machine env dpa-node$N)
	docker swarm join \
    --token SWMTKN-1-10y13gc91v5f0xg3n1spf3vjqhydhkqybklqw3eo7m2at62fqy-bxa0f8cmjy7putibj94oubhxf \
    192.168.99.100:2377
done
eval $(docker-machine env dpa-node1)



## desde servidor remoto ejecutar:
csvsql --db postgresql://upostgres:ppostgres@ip-node1:5432/postgres --insert iris.csv


csvsql -i postgresql industry_data_clean.csv

# obtener iris de UCI
# convertir csv a sql statement con http://www.convertcsv.com/csv-to-sql.htm



